<Window x:Class="erp_system.PasswordChangeDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:icon="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        mc:Ignorable="d"
        Title="Change Password" Height="400" Width="400"
        Background="Transparent"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen">

    <Border CornerRadius="10"
            BorderThickness="1"
            BorderBrush="{StaticResource BorderColor}"
            Background="{StaticResource BackgroundColor}">

        <Grid>
            <Grid.RowDefinitions>
                <!-- Header -->
                <RowDefinition Height="60"/>
                <!-- Content -->
                <RowDefinition Height="*"/>
                <!-- Buttons -->
                <RowDefinition Height="60"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="40"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Margin="20,0,0,0">
                    <icon:IconImage Icon="Key" 
                                    Height="20" 
                                    Width="20" 
                                    Margin="0,0,10,0" 
                                    Foreground="{StaticResource FontDark}"/>
                    <TextBlock Text="Change Password" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="{StaticResource FontDark}"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <Button Grid.Column="1"
                        Style="{StaticResource Control_Button}"
                        Click="Close_Button_Click"
                        Margin="5">
                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8BB;" FontSize="10"/>
                </Button>
            </Grid>

            <!-- Content -->
            <ScrollViewer Grid.Row="1" Margin="20,10,20,10" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                <TextBlock Text="Enter your new password below:"
                           FontSize="14"
                           Foreground="{StaticResource FontDark}"
                           Margin="0,0,0,20"/>

                <!-- Current Password -->
                <StackPanel Margin="0,0,0,15">
                    <TextBlock Text="Current Password:"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="{StaticResource FontDark}"
                               Margin="0,0,0,5"/>
                    <Grid>
                        <PasswordBox x:Name="CurrentPasswordBox"
                                     Height="35"
                                     FontSize="14"
                                     Padding="10,8,40,8"/>
                        <TextBox x:Name="CurrentPasswordTextBox"
                                 Height="35"
                                 FontSize="14"
                                 Padding="10,8,40,8"
                                 Visibility="Collapsed"/>
                        <Button x:Name="CurrentPasswordToggle"
                                Width="30"
                                Height="30"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Margin="0,0,5,0"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="CurrentPasswordToggle_Click">
                            <icon:IconImage Icon="Eye" Width="16" Height="16" Foreground="{StaticResource FontDark}"/>
                        </Button>
                    </Grid>
                </StackPanel>

                <!-- New Password -->
                <StackPanel Margin="0,0,0,15">
                    <TextBlock Text="New Password:"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="{StaticResource FontDark}"
                               Margin="0,0,0,5"/>
                    <Grid>
                        <PasswordBox x:Name="NewPasswordBox"
                                     Height="35"
                                     FontSize="14"
                                     Padding="10,8,40,8"/>
                        <TextBox x:Name="NewPasswordTextBox"
                                 Height="35"
                                 FontSize="14"
                                 Padding="10,8,40,8"
                                 Visibility="Collapsed"/>
                        <Button x:Name="NewPasswordToggle"
                                Width="30"
                                Height="30"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Margin="0,0,5,0"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="NewPasswordToggle_Click">
                            <icon:IconImage Icon="Eye" Width="16" Height="16" Foreground="{StaticResource FontDark}"/>
                        </Button>
                    </Grid>
                </StackPanel>

                <!-- Confirm Password -->
                <StackPanel Margin="0,0,0,20">
                    <TextBlock Text="Confirm New Password:"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="{StaticResource FontDark}"
                               Margin="0,0,0,5"/>
                    <Grid>
                        <PasswordBox x:Name="ConfirmPasswordBox"
                                     Height="35"
                                     FontSize="14"
                                     Padding="10,8,40,8"/>
                        <TextBox x:Name="ConfirmPasswordTextBox"
                                 Height="35"
                                 FontSize="14"
                                 Padding="10,8,40,8"
                                 Visibility="Collapsed"/>
                        <Button x:Name="ConfirmPasswordToggle"
                                Width="30"
                                Height="30"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Margin="0,0,5,0"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="ConfirmPasswordToggle_Click">
                            <icon:IconImage Icon="Eye" Width="16" Height="16" Foreground="{StaticResource FontDark}"/>
                        </Button>
                    </Grid>
                </StackPanel>

                <TextBlock x:Name="ErrorMessage"
                           Foreground="{StaticResource ErrorBrush}"
                           FontSize="12"
                           TextWrapping="Wrap"
                           Visibility="Collapsed"
                           Margin="0,0,0,10"/>
                </StackPanel>
            </ScrollViewer>

            <!-- Buttons -->
            <StackPanel Grid.Row="2" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right"
                        Margin="20,15,20,15">
                
                <Button Style="{StaticResource Control_Button}"
                        Click="Cancel_Button_Click"
                        Margin="0,0,12,0"
                        Padding="20,8"
                        Height="40"
                        Width="Auto"
                        MinWidth="100"
                        Background="Transparent"
                        BorderThickness="1"
                        BorderBrush="{StaticResource BorderColor}">
                    <StackPanel Orientation="Horizontal">
                        <icon:IconImage Icon="Times" Width="16" Height="16" Margin="0,0,8,0" Foreground="{StaticResource FontDark}"/>
                        <TextBlock Text="Cancel" Foreground="{StaticResource FontDark}" FontSize="14"/>
                    </StackPanel>
                </Button>

                <Button Style="{StaticResource Control_Button}"
                        Click="Save_Button_Click"
                        Padding="20,8"
                        Height="40"
                        Width="Auto"
                        MinWidth="100"
                        Background="Transparent"
                        BorderThickness="1"
                        BorderBrush="{StaticResource BorderColor}">
                    <StackPanel Orientation="Horizontal">
                        <icon:IconImage Icon="Check" Width="16" Height="16" Margin="0,0,8,0" Foreground="{StaticResource SuccessBrush}"/>
                        <TextBlock Text="Save" Foreground="{StaticResource FontDark}" FontSize="14"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>
